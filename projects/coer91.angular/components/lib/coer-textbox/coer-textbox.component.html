<div class="coer-textbox" 
    [ngClass]="{ 
        'background-color-readonly': isReadonly(),
        'invisible': isInvisible(),
        'display-none': isHidden(), 
    }"
    [ngStyle]="{
        width       : width(), 
        minWidth    : minWidth(),
        maxWidth    : maxWidth(),
        marginTop   : marginTop(),
        marginRight : marginRight(),
        marginBottom: marginBottom(),
        marginLeft  : marginLeft() 
    }">  

    @if(_showExternalButtonLeft()) {
        <div class="coer-textbox-button border-radius-left-5px">
            <coer-button
                [icon]="externalButtons()?.iconLeft || ''"
                [type]="externalButtons()?.typeLeft || 'icon-filled'"
                [color]="externalButtons()?.colorLeft || 'secondary'"
                [isReadonly]="(externalButtons()?.isReadonlyLeft || false)"
            ></coer-button>
        </div>
    }
    
    <input [type]="_inputType()" 
        [id]="_id" 
        [name]="_id" 
        [value]="_value()"
        [disabled]="!_isEnabled()"
        [minLength]="minLength()"
        [maxLength]="maxLength()"
        (input)="_SetValue($event.target.value)"
        [ngStyle]="{ 
            width: _widtht(),
            paddingLeft:  _paddingLeft(),
            paddingRight: _paddingRight(), 
            'text-align': textPosition()
        }">  

    @if(_showExternalButtonRight()) {
        <div class="coer-textbox-button border-radius-right-5px">
            <coer-button
                [icon]="externalButtons()?.iconRight || ''"
                [type]="externalButtons()?.typeRight || 'icon-filled'"
                [color]="externalButtons()?.colorRight || 'secondary'"
                [isReadonly]="(externalButtons()?.isReadonlyRight || false)" 
            ></coer-button>
        </div>
    }

    @if(_paddingRight() != '10px') {
        <div class="icon-container" [ngStyle]="{ right: _right() }">
            @if(isInvalid() && _isEnabled()) {
                <i class="i91-exclamation-circle-fill"></i>
            }
    
            @else if(isValid() && _isEnabled()) {
                <i class="i91-check-circle-fill"></i>
            }  

            @if(_showSearchButton()) {
                <i class="i91-search" (click)="_ClickSearch()"></i>
            }
    
            @else if(_showClearButton()) {
                <i class="i91-mark" (click)="Clear()"></i>
            }  

            @else if(_showSecretClosed()) {
                <i class="i91-eye-slash-fill" (click)="_showSecret.set(false); Focus();"></i>
            }
    
            @else if(_showSecretOpen()) {
                <i class="i91-eye-fill" (click)="_showSecret.set(true); Focus();"></i>
            }  
        </div>
    }

    @if(_showLabel()) {
        <label [for]="_id"
            [ngStyle]="{ width: _widtht() }"
            [ngClass]="{ 
                'focus'          : _isFocused() && IsNotOnlyWhiteSpace(label()),
                'no-empty'       : IsNotOnlyWhiteSpace(_value()),
                'external-button': _showExternalButtonLeft(), 
                'display-none'   : isLoading(),
                'isValid'        : isValid(), 
                'isInvalid'      : isInvalid(),
            }">
            {{ _label() }}
        </label>
    }

    @if(isLoading()) {
        <div class="loading"></div>
    }

    @if(_isEnabled()) {
        <div class="line"
            [ngStyle]="{ left: _left(), right: _right() }"
            [ngClass]="{   
                'focus'    : _isFocused(), 
                'isValid'  : _isFocused() && isValid(), 
                'isInvalid': _isFocused() && isInvalid(),
                'display-none': !_isEnabled()
            }" 
        ></div>
    }
</div>     
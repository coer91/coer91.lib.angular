<main>
    <div class="login-container">
        <h1>{{ title }}</h1>

        <section class="form"> 
            <coer-form #form [formGroup]="formGroup" [isLoading]="isLoading()">
                <!-- user -->
                <coer-textbox
                    #userRef
                    [label]="(view() === 'LOGIN' ? 'User' : 'User / Email')"
                    formControlName="user"
                    [isLoading]="isLoading()"
                    [isInvalid]="form.IsInvalidControl('user')"
                    marginTop="35px"
                    (onKeyupEnter)="(view() === 'RECOVERY' ? loginRef.Click() : passwordRef.Focus())"
                ></coer-textbox>

                <!-- password -->
                <coer-secretbox
                    #passwordRef
                    label="Password"
                    formControlName="password"
                    [isLoading]="isLoading()"
                    marginTop="35px"
                    [isInvisible]="view() === 'RECOVERY'"
                    (onKeyupEnter)="loginRef.Click()"
                ></coer-secretbox>

                <!-- Login -->
                <coer-button
                    #loginRef
                    [label]="(view() === 'LOGIN' ? 'Login' : 'Recovery')"
                    width="100%"
                    marginTop="35px"
                    [isLoading]="isLoading()"
                    [isInvisible]="!_ShowButton()"
                    (onClick)="_Click()"
                ></coer-button>
            </coer-form>  
        </section>

        @if(!isLoading()) {
            <section class="options" (click)="_Toggle()">
                {{ (view() === 'LOGIN' ? 'Recovery' : 'Back') }}
            </section>
        }
    </div>  

    <!-- background -->
    @if(background.length <= 0) {
        <div class="login-background"></div>
    }

    @else if (background.toLowerCase().endsWith('.png') || background.toLowerCase().endsWith('.jpeg')) {
        <div class="login-background-image" [ngStyle]="{ backgroundImage: `url('${background}')` }"></div>
    }

    @else if (background.toLowerCase().endsWith('.mp4')) {
        <video autoplay loop muted playsinline>
            <source [src]="background" type="video/mp4" />
        </video>
    }
</main>